<!DOCTYPE html>
<html>
  <head>
    
    <%-include('./partials/head.ejs')%>

  <body>
    
    <%-include('./partials/navbar.ejs')%>

    <div class="table-responsive-sm ">
      <table id="usersTable" class="table table-striped table-bordered table-hover align-middle text-center">
        <thead>
          <tr>
            
            <th scope ="col">Id</th>
            <th scope ="col">First Name</th>
            <th scope ="col">Last Name</th>
            <th scope ="col">Username</th>
            <th scope ="col">Email</th>
            <th scope ="col">Address</th>
            <th scope ="col">Telephone</th>
            <th scope ="col">Role</th>
            <th scope ="col">Membership</th>
            <th scope ="col">Created At</th>
            <th scope ="col">Updated At</th>
            <th scope ="col">Options</th> 
          </tr>
        </thead>
        <tbody id="usersTableContent">
          <% users.forEach(function(user) {%>
                <tr>
                  <td>
                    <%= user.id %>
                  </td>
                  <td>
                    <%= user.firstname  %>
                  </td>
                  <td>
                    <%= user.lastname  %>
                  </td>
                  <td>
                    <%= user.username  %>
                  </td>
                  <td>
                    <%= user.email  %>
                  </td>
                  <td>
                    <%= user.address  %>
                  </td>
                  <td>
                    <%= user.telephone  %>
                  </td>
                  <td>
                    <%= user.RoleId  %>
                  </td>
                  <td>
                    <%= user.MembershipId  %>
                  </td>
                  <td class="short-date">
                    <%= user.createdAt ? user.createdAt.slice(0, 10).split('-').reverse().join('/') : '' %>
                  </td>
                  <td class="short-date">
                    <%= user.updatedAt ? user.updatedAt.slice(0, 10).split('-').reverse().join('/') : '' %>
                  </td>
                  <td>
                    
                    <button class="btn btn-warning btn-sm mx-1"
                      type="button" onclick="event.preventDefault();deleteUser('<%= user.id %>')">
                      Delete
                    </button>
                    <button class="btn btn-danger btn-sm mx-1"
                      onclick="openUserModal(JSON.parse(decodeURIComponent('<%= encodeURIComponent(JSON.stringify(user)) %>')))">
                      Edit
                    </button>
                </td>
                </tr>
          <%});%>
        </tbody>
        
      </table>
    </div>
    <%- include('./partials/modalUsers.ejs') %>
    <%-include('./partials/footer.ejs')%> 
     
  </body>
</html>